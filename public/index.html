<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Emotion-Driven Music Visualizer</title>
    <link rel="stylesheet" href="style.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <script type="module" defer src="script.js"></script>
  </head>
  <body>
    <!-- Modal -->
    <div id="devModal" class="modal">
      <div class="modal-content">
        <span id="closeBtn" class="close">&times;</span>
        <h2>Still Developing</h2>
        <p>Forgive any inconveniences. We're working hard to improve the experience!</p>
      </div>
    </div>

    <div class="container">
      <h1>ðŸŽµ Emotion-Driven Music Visualizer ðŸŽµ</h1>
      <button id="startBtn" class="primary">Start (Enable Camera & Audio)</button>

      <div class="stage">
        <video id="video" autoplay muted playsinline width="300" height="300"></video>
        <canvas id="overlay" width="300" height="300"></canvas>
      </div>

      <div class="emotion-display" id="emotion-display">Click Start</div>

      <div class="controls">
        <button id="changeSongBtn" class="secondary">Change Song</button>

        <label>
          Test Mood:
          <select id="testMood">
            <option value="auto" selected>Auto (from face)</option>
            <option value="happy">happy â†’ party</option>
            <option value="sad">sad â†’ sad</option>
            <option value="angry">angry â†’ item</option>
            <option value="neutral">neutral â†’ love</option>
            <option value="surprised">surprised â†’ mass</option>
            <option value="disgusted">disgusted â†’ instrumental</option>
            <option value="fearful">fearful â†’ romantic</option>
          </select>
        </label>

        <label>
          Language:
          <select id="languageSelect">
            <option value="english">English</option>
            <option value="hindi">Hindi</option>
            <option value="kannada">Kannada</option>
            <option value="malayalam">Malayalam</option>
            <option value="marathi">Marathi</option>
            <option value="punjabi">Punjabi</option>
            <option value="tamil">Tamil</option>
            <option value="telugu">Telugu</option>
          </select>
        </label>
      </div>

      <audio id="musicPlayer" controls></audio>
      <canvas id="visualizer" width="640" height="150"></canvas>

      <p class="hint">If camera fails or models arenâ€™t present, choose a test mood to play music anyway.</p>
    </div>

    <script>
      var modal = document.getElementById('devModal');
      var closeBtn = document.getElementById('closeBtn');

      window.onload = function() {
        modal.style.display = 'block';
      };

      closeBtn.onclick = function() {
        modal.style.display = 'none';
      };

      window.onclick = function(event) {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      };
    </script>
  </body>
</html>
